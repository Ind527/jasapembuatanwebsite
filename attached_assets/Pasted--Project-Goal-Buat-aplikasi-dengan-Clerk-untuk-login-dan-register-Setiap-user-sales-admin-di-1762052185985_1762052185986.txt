
ğŸ’¡ Project Goal:
Buat aplikasi dengan Clerk untuk login dan register. 
Setiap user (sales/admin) disimpan di backend API milik saya (Node.js + Express). 
Gunakan Clerk untuk autentikasi utama dan JWT verification. 
Gunakan MongoDB atau SQLite untuk menyimpan data tambahan seperti role, nama, dan aktivitas login.

ğŸ§© Tech Stack:
- Frontend: React + Clerk (SDK)
- Backend: Express.js (Node.js)
- Database: MongoDB (mongoose) atau SQLite (pilih yang ringan)
- Clerk API untuk auth & session verification

ğŸ¯ Fitur yang harus dibuat:
1. Login/Register dengan Clerk (Google, email, dsb)
2. Setelah login, user dikirim ke backend API `/api/users/sync`
   â†’ backend memeriksa apakah user sudah ada di database:
      - Jika belum ada, buat data baru: { clerkId, email, name, role: "sales" }
      - Jika email admin tertentu, set role: "admin"
3. Backend memiliki endpoint:
   - `GET /api/users` â†’ hanya bisa diakses admin (verify Clerk JWT + role check)
   - `GET /api/profile` â†’ ambil data user sendiri
   - `PUT /api/users/:id/role` â†’ update role user (admin only)
4. Clerk session diverifikasi di setiap endpoint backend pakai middleware `clerkClient.verifyToken()`
5. Simpan role dan data pengguna di database agar bisa dikelola tanpa ubah data Clerk langsung.

ğŸ§± Struktur Folder:
.
â”œâ”€â”€ frontend/
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ App.jsx
â”‚   â”‚   â””â”€â”€ pages/
â”‚   â”‚       â”œâ”€â”€ Login.jsx
â”‚   â”‚       â”œâ”€â”€ Dashboard.jsx
â”‚   â”‚       â””â”€â”€ AdminPanel.jsx
â”‚   â””â”€â”€ package.json
â””â”€â”€ backend/
    â”œâ”€â”€ server.js
    â”œâ”€â”€ routes/
    â”‚   â””â”€â”€ users.js
    â”œâ”€â”€ models/
    â”‚   â””â”€â”€ User.js
    â”œâ”€â”€ middleware/
    â”‚   â””â”€â”€ auth.js
    â””â”€â”€ package.json

ğŸªª Contoh skema User.js:
{
  clerkId: String,
  email: String,
  name: String,
  role: { type: String, enum: ["sales", "admin"], default: "sales" },
  createdAt: { type: Date, default: Date.now }
}

ğŸ” Middleware auth.js:
- Verifikasi token Clerk (import { clerkClient } from "@clerk/clerk-sdk-node")
- Ambil userId dari token
- Cek role di database untuk otorisasi endpoint admin

âš™ï¸ Tambahkan Environment Variables di Replit:
CLERK_SECRET_KEY=sk_live_...
CLERK_PUBLISHABLE_KEY=pk_live_...
MONGO_URI=mongodb+srv://...
PORT=5000

âœ… Hasil akhir:
- Login Clerk tetap aman & dikelola otomatis
- Data user (sales/admin) tersimpan di backend database kamu
- Admin bisa login dan mengelola user lain
- Sales hanya bisa lihat data mereka sendiri